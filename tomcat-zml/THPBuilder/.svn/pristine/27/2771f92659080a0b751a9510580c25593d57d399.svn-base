webpackJsonp([60],{"1x2C":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("XLwt"),i=e.n(s),n=null,l={data:function(){return{treeData:[{label:"光伏项目01",children:[{id:"rsd1",label:"光伏站A"},{id:"rsd2",label:"光伏站B"},{label:"光伏站C",children:[{id:"rsd3",label:"光伏站1"},{id:"rsd4",label:"光伏站2"},{id:"rsd5",label:"光伏站3"}]}]},{label:"光伏项目02",children:[{label:"光伏站D",children:[{label:"光伏站D-1"}]},{label:"光伏站F",children:[{label:"光伏站F-1"}]}]}],selecteddate:"",selectedcndate:"",lastmonth:"",curmonth:"",rereshflag:!1,minuteslist:[{label:"1min",value:60},{label:"5min",value:300},{label:"20min",value:1200}],selecteminutes:60,activeName:"first",defaultname:"first",tabchangeflag:!1,stationname:"",stationid:"",stationinfo:{imgurl:"",zjgl:"",gl:"",ssfz:"",todayfdl:"",yesterdayfdl:"",pr:"",equaltime:"",warninfo:"",messstatus:""},searchtext:"",lastlongmonth:1,tabledata:[],currentPage:1,pagesize:20,tabletotal:0,gfunitlist:[],dayfdl:"",dayavefdl:"",equaltime:{max:"",min:"",ave:""}}},components:{TreeOrg:e("9qQU").a},methods:{PVviewById:function(t){this.tabchangeflag=!1,"first"==this.activeName?(this.getstationinfoByid(),this.getechartinfo(),this.getfaultinfodata()):(this.getgflist(),this.getcnstatisinfo(),this.getdayfhfsinfo(),this.getequaltimeinfo())},getstationinfoByid:function(){var t=this,a={stationid:t.stationid};t.$http.post(this.BASE_INFO.BASE_URL+"api/resource/getstationinfoByid",a).then(function(a){if(0==(a=a.data).code&&a.data){var e=a.data;t.stationinfo=e}})},getechartinfo:function(){var t=this,a={date:t.selecteddate};t.$http.post(this.BASE_INFO.BASE_URL+"api/resource/getstationfaultbyDate",a).then(function(a){if(0==(a=a.data).code&&a.data){var e=a.data;t.initchart(e)}})},initchart:function(t){var a,e=[];a=["功率","累计电量"];for(var s=1;s<=24;s++)e.push(s+"时");var n=t.prelist,l=t.curlist,o={title:{text:""},legend:{data:a},tooltip:{trigger:"axis"},grid:{x:50,y:30,x2:30,y2:20},xAxis:[{type:"category",data:e}],yAxis:[{name:"单位:kW.h",type:"value"},{name:"单位:kW",type:"value"}],series:[{name:a[0],type:"line",data:n},{name:a[1],type:"bar",data:l}]};i.a.init(document.getElementById("echartbar")).setOption(o)},btnclick:function(t){this.lastlongmonth=t,this.getfaultinfodata()},getfaultinfodata:function(){var t=this,a={month:t.lastlongmonth,pagesize:t.pagesize,currentPage:t.currentPage};t.$http.post(this.BASE_INFO.BASE_URL+"api/resource/getstationfaultlist",a).then(function(a){if(0==(a=a.data).code&&a.data){var e=a.data;t.tabletotal=e.total,t.tabledata=e.list}})},handleCurrentChange:function(){console.log("currentPage:"+this.currentPage),this.getfaultinfodata()},getgflist:function(){var t=this;t.$http.get(this.BASE_INFO.BASE_URL+"api/resource/getgfunitlist").then(function(a){if(0==(a=a.data).code&&a.data){var e=a.data;t.gfunitlist=e}})},getcnstatisinfo:function(){var t=this;t.$http.get(this.BASE_INFO.BASE_URL+"api/resource/getcnstatisinfo").then(function(a){if(0==(a=a.data).code&&a.data){var e=a.data;t.dayfdl=e.dayfdl,t.dayavefdl=e.dayavefdl,t.initstatisechart(e.edata)}})},initstatisechart:function(t){var a={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{x:30,y:10,x2:20,y2:30},xAxis:[{type:"category",data:["1时","2时","3时","4时","5时","6时","7时","8时","9时","10时","11时","12时","13时","14时","15时","16时","17时","18时","19时","20时","21时","22时","23时","24时"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"",type:"bar",barWidth:"60%",data:t}]};i.a.init(document.getElementById("cnstatisechart")).setOption(a)},getdayfhfsinfo:function(){var t=this;t.$http.get(this.BASE_INFO.BASE_URL+"api/resource/getdayfhfsinfo").then(function(a){if(0==(a=a.data).code&&a.data){var e=a.data;t.initdayfhline(e)}})},initdayfhline:function(t){var a={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},grid:{x:30,y:50,x2:40,y2:20},legend:{data:["有功功率","辐射照度"]},xAxis:[{type:"category",splitLine:{show:!1},data:["6时","7时","8时","9时","10时","11时","12时","13时","14时","15时","16时","17时","18时","19时","20时","21时"]}],yAxis:[{type:"value",name:"kW",axisLabel:{formatter:"{value}"}},{type:"value",name:"W/㎡",axisLabel:{formatter:"{value}"}}],series:[{name:"有功功率",type:"bar",yAxisIndex:1,data:t.fhdata},{name:"辐射照度",type:"bar",data:t.fsdata}]};i.a.init(document.getElementById("fhfsline")).setOption(a)},getequaltimeinfo:function(){var t=this;t.$http.get(this.BASE_INFO.BASE_URL+"api/resource/getequaltimeinfo").then(function(a){if(0==(a=a.data).code&&a.data){var e=a.data;t.equaltime.max=e.max,t.equaltime.min=e.min,t.equaltime.ave=e.ave,t.initequaltimechart(e.edata)}})},initequaltimechart:function(t){console.dir(t);var a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},color:["#3398DB"],grid:{x:30,y:50,x2:40,y2:20},xAxis:[{type:"category",splitLine:{show:!1},data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}],yAxis:[{type:"value",name:"单位:h",axisLabel:{formatter:"{value}"}}],series:[{name:"",type:"bar",data:t}]};i.a.init(document.getElementById("equaltime")).setOption(a)},tabClick:function(){this.activeName!=this.defaultname&&(this.defaultname=this.activeName,this.tabchangeflag||(this.tabchangeflag=!0,this.getgflist(),this.getcnstatisinfo(),this.getdayfhfsinfo(),this.getequaltimeinfo()))},changecndate:function(){console.log("触发change"),this.getcnstatisinfo()},changedzdate:function(){this.getechartinfo()},controlsetinterval:function(){console.log("定时期刷新");var t=this;console.log("selecteminutes:"+this.selecteminutes),console.log("rereshflag:"+this.rereshflag),n&&clearInterval(n),this.rereshflag&&(n=setInterval(function(){t.getechartinfo()},1e3*this.selecteminutes))},refreshclick:function(){this.controlsetinterval(),this.getechartinfo()}},created:function(){this.stationname=this.$route.query.name,this.stationid=this.$route.query.stationid},mounted:function(){var t=new Date,a=t.getFullYear(),e=t.getMonth()+1;e=e<10?"0"+e:e;var s=t.getDate();s=s<10?"0"+s:s,this.selecteddate=a+"-"+e+"-"+s,this.selectedcndate=this.selecteddate,this.curmonth=a+"-"+e,e>1?e-=1:(a-=1,e=12),this.lastmonth=a+"-"+(e<10?"0"+e:e),this.getstationinfoByid(),this.getechartinfo(),this.getfaultinfodata()}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-row",{staticClass:"contentpanel"},[e("el-col",{staticStyle:{width:"230px"},attrs:{span:4}},[e("TreeOrg",{attrs:{treeData:t.treeData},on:{PVviewById:t.PVviewById}})],1),t._v(" "),e("el-col",{staticStyle:{width:"calc(100% - 230px)"},attrs:{span:20}},[e("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"站点详情",name:"first"}},[e("el-row",{staticClass:"panelitem"},[e("el-col",{attrs:{span:24}},[e("span",[t._v("电站信息 | "+t._s(t.stationname))]),t._v(" "),e("span",{staticClass:"floatright"},[e("span",{staticClass:"nextspan"},[t._v("时间:")]),t._v(" "),e("span",{staticClass:"datebox"},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changedzdate},model:{value:t.selecteddate,callback:function(a){t.selecteddate=a},expression:"selecteddate"}})],1),t._v(" "),e("el-switch",{attrs:{"active-text":"自动刷新"},on:{change:t.controlsetinterval},model:{value:t.rereshflag,callback:function(a){t.rereshflag=a},expression:"rereshflag"}}),t._v(" "),e("el-select",{staticClass:"selectedw100",attrs:{placeholder:"请选择"},on:{change:t.controlsetinterval},model:{value:t.selecteminutes,callback:function(a){t.selecteminutes=a},expression:"selecteminutes"}},t._l(t.minuteslist,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.refreshclick}})],1)])],1),t._v(" "),e("el-row",{staticClass:"panelitem"},[e("el-col",{staticClass:"paddingright",attrs:{span:16}},[e("div",{staticClass:"month-plan-any"},[e("div",{staticClass:"leftimg"},[e("img",{attrs:{src:t.stationinfo.imgurl}})]),t._v(" "),e("div",{staticClass:"infoblock"},[e("div",[t._v("装机功率: "+t._s(t.stationinfo.zjgl)+" kWp")]),t._v(" "),e("div",[t._v("功率: "+t._s(t.stationinfo.gl)+" W")]),t._v(" "),e("div",[t._v("瞬时辐照: "+t._s(t.stationinfo.ssfz)+" ")]),t._v(" "),e("div",[t._v("今日发电量: "+t._s(t.stationinfo.todayfdl)+" kW.h")]),t._v(" "),e("div",[t._v("昨日发电量: "+t._s(t.stationinfo.yesterdayfdl)+" kW.h")])]),t._v(" "),e("div",{staticClass:"infoblock"},[e("div",[t._v("PR值: "+t._s(t.stationinfo.pr))]),t._v(" "),e("div",[t._v("等效时间: "+t._s(t.stationinfo.equaltime)+" h")]),t._v(" "),e("div",[t._v("告警信息: "+t._s(t.stationinfo.warninfo))]),t._v(" "),e("div",[t._v("通讯状态: "+t._s(t.stationinfo.messstatus)+" ")]),t._v(" "),e("div",[t._v("今日发电量: "+t._s(t.stationinfo.todayfdl)+" kW.h")])]),t._v(" "),e("div",{staticStyle:{clear:"both"}})])]),t._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bckf7f8f9 month-plan-any"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("div",[t._v("环境温度")]),t._v(" "),e("div",{staticClass:"spaniconbox"},[e("span",{staticClass:"spanicon iconm-temperature"}),e("span",[t._v("32"),e("label",[t._v("℃")])])])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("div",[t._v("电池板温度")]),t._v(" "),e("div",{staticClass:"spaniconbox"},[e("span",{staticClass:"spanicon iconm-wholegf"}),e("span",[t._v("35"),e("label",[t._v("℃")])])])])],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("div",[t._v("今日天气")]),t._v(" "),e("div",{staticClass:"spaniconbox"},[e("span",{staticClass:"spanicon iconm-weather"}),e("span",[t._v("32"),e("label",[t._v("℃")])])])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("div",[t._v("明日天气")]),t._v(" "),e("div",{staticClass:"spaniconbox"},[e("span",{staticClass:"spanicon iconm-weather"}),e("span",[t._v("35"),e("label",[t._v("℃")])])])])],1)],1)])],1),t._v(" "),e("el-row",{staticClass:"panelitem"},[e("el-col",{staticClass:"paddingright height190",attrs:{span:16}},[e("div",{staticClass:"month-plan-any"},[e("div",[t._v("产能统计")]),t._v(" "),e("div",{attrs:{id:"echartbar"}})])]),t._v(" "),e("el-col",{staticClass:"height190",attrs:{span:8}},[e("div",{staticClass:"glbox month-plan-any paddingleft paddingright"},[e("span",[t._v("功率归一化")]),t._v(" "),e("span",{staticClass:"floatright"},[t._v("0.14 "),e("span",[t._v("kW/kWp")])])]),t._v(" "),e("div",{staticClass:"glbox month-plan-any paddingleft paddingright"},[e("span",[t._v("总发电量")]),t._v(" "),e("span",{staticClass:"floatright"},[t._v("101900 "),e("span",[t._v("kW.h")])])])])],1),t._v(" "),e("el-row",{staticClass:"panelitem"},[e("el-col",{attrs:{span:24}},[e("div",[e("span",[t._v("故障信息")]),t._v(" "),e("div",{staticClass:"floatright"},[e("el-button-group",{staticClass:"floatright"},[e("el-button",{class:{"el-button--primary":1==t.lastlongmonth},attrs:{type:"small"},on:{click:function(a){t.btnclick(1)}}},[t._v("一个月")]),t._v(" "),e("el-button",{class:{"el-button--primary":3==t.lastlongmonth},attrs:{type:"small"},on:{click:function(a){t.btnclick(3)}}},[t._v("三个月")]),t._v(" "),e("el-button",{class:{"el-button--primary":!t.lastlongmonth},attrs:{type:"small"},on:{click:function(a){t.btnclick("")}}},[t._v("全部")])],1),t._v(" "),e("div",{staticClass:"searchrow smallsearch"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.searchtext,callback:function(a){t.searchtext=a},expression:"searchtext"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)],1)]),t._v(" "),e("div",[t.tabledata?[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tabledata,stripe:"",height:"190"}},[e("el-table-column",{attrs:{prop:"faultlevel",label:"故障级别",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"occurrtime",label:"发生时间",width:"150"}}),t._v(" "),e("el-table-column",{attrs:{prop:"fromdevice",label:"来源设备",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"faultname",label:"故障名称",width:"140"}}),t._v(" "),e("el-table-column",{attrs:{prop:"faultnfo",label:"故障信息"}})],1),t._v(" "),e("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.tabledata.length<t.tabletotal,expression:"tabledata.length<tabletotal"}],attrs:{"page-size":t.pagesize,layout:"total,prev, pager, next",total:t.tabletotal,"current-page":t.currentPage},on:{"update:currentPage":function(a){t.currentPage=a},"current-change":t.handleCurrentChange}})]:t._e()],2)])],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"单元详情",name:"second"}},[e("el-row",[e("el-col",{attrs:{span:16}},[e("div",[t._v("光伏站生产监控")]),t._v(" "),e("div",[t.gfunitlist?t._l(t.gfunitlist,function(a){return e("div",{staticClass:"gfitem"},[e("div",{staticClass:"gfimgbox"},[e("span",{staticClass:"iconm-pv"})]),t._v(" "),e("div",{staticClass:"gfcontentbox"},[e("div",[t._v(t._s(a.one)+" MW")]),t._v(" "),e("div",[t._v(t._s(a.two)+" kW.h")]),t._v(" "),e("div",[t._v(t._s(a.three)+" kM")])])])}):t._e(),t._v(" "),e("div",{staticStyle:{clear:"both"}})],2)]),t._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"panelitem"},[t._v("光伏电站统计信息")]),t._v(" "),e("el-row",{staticClass:"panelitem month-plan-any"},[e("el-col",{staticClass:"gfstationitem borderright",attrs:{span:12}},[e("div",{staticClass:"color108CEE"},[t._v("20 "),e("span",[t._v("kW")])]),t._v(" "),e("div",[t._v("总功率")])]),t._v(" "),e("el-col",{staticClass:"gfstationitem",attrs:{span:12}},[e("div",{staticClass:"color108CEE"},[t._v("300 "),e("span",[t._v("kW")])]),t._v(" "),e("div",[t._v("总发电量")])])],1),t._v(" "),e("el-row",{staticClass:"margintop5 panelitem month-plan-any"},[e("el-col",{staticClass:"gfstationitem borderright",attrs:{span:12}},[e("div",{staticClass:"color108CEE"},[t._v("230 "),e("span",[t._v("k")])]),t._v(" "),e("div",[t._v("累计发电时长")])]),t._v(" "),e("el-col",{staticClass:"gfstationitem",attrs:{span:12}},[e("div",{staticClass:"color108CEE"},[t._v("300 "),e("span",[t._v("h")])]),t._v(" "),e("div",[t._v("运行时长")])])],1),t._v(" "),e("div",{staticClass:"panelitem month-plan-any"},[e("div",[e("span",{staticStyle:{"line-height":"34px"}},[t._v("产能统计")]),t._v(" "),e("span",{staticClass:"floatright"},[e("span",{staticClass:"nextspan"},[t._v("时间:")]),t._v(" "),e("span",{staticClass:"datebox"},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.changecndate},model:{value:t.selectedcndate,callback:function(a){t.selectedcndate=a},expression:"selectedcndate"}})],1)])]),t._v(" "),e("div",{attrs:{id:"cnstatisechart"}}),t._v(" "),e("el-row",{staticStyle:{"margin-top":"15px"}},[e("el-col",{staticClass:"gfstationitem borderright",attrs:{span:12}},[e("div",{staticClass:"color108CEE"},[t._v(t._s(t.dayfdl)+" "),e("span",[t._v("kW.h")])]),t._v(" "),e("div",[t._v("日发电量")])]),t._v(" "),e("el-col",{staticClass:"gfstationitem",attrs:{span:12}},[e("div",{staticClass:"color108CEE"},[t._v(t._s(t.dayavefdl)+" "),e("span",[t._v("kW.h")])]),t._v(" "),e("div",[t._v("日均发电量")])])],1)],1),t._v(" "),e("div",{staticClass:"panelitem month-plan-any"},[e("div",[e("span",[t._v("日负荷与辐射曲线")])]),t._v(" "),e("div",{attrs:{id:"fhfsline"}})]),t._v(" "),e("div",{staticClass:"panelitem month-plan-any"},[e("div",[e("span",[t._v("等效利用小时数")])]),t._v(" "),e("div",{attrs:{id:"equaltime"}}),t._v(" "),e("el-row",{staticStyle:{"margin-top":"15px"}},[e("el-col",{staticClass:"gfstationitem borderright",attrs:{span:8}},[e("div",{staticClass:"color108CEE"},[t._v(t._s(t.equaltime.max)+" "),e("span",[t._v("h")])]),t._v(" "),e("div",[t._v("最大")])]),t._v(" "),e("el-col",{staticClass:"gfstationitem borderright",attrs:{span:8}},[e("div",{staticClass:"color108CEE"},[t._v(t._s(t.equaltime.ave)+" "),e("span",[t._v("h")])]),t._v(" "),e("div",[t._v("累计平均")])]),t._v(" "),e("el-col",{staticClass:"gfstationitem",attrs:{span:8}},[e("div",{staticClass:"color108CEE"},[t._v(t._s(t.equaltime.min)+" "),e("span",[t._v("h")])]),t._v(" "),e("div",[t._v("最小")])])],1)],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=e("VU/8")(l,o,!1,function(t){e("nUlO")},null,null);a.default=c.exports},nUlO:function(t,a){}});
//# sourceMappingURL=60.c9ed0795f0bde9be886e.js.map