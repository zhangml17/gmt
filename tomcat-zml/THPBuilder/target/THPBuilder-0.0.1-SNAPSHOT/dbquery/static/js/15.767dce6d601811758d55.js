webpackJsonp([15],{"9LXM":function(t,a){},A28w:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("BO1k"),i=e.n(r),l=e("XLwt"),n=e.n(l),o={data:function(){return{totalTableData:[],oldDate:""}},mounted:function(){this.oldDate=this.yeardate,console.log(this.oldDate),this.oldDate!=this.yeardate&&alert(1),this.initchart_avgload(),this.getAllMinMaxData()},methods:{totalheadercellstyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"background:#E4E7EB;font-weight: bold;color: #101010;"},getAllMinMaxData:function(){var t=this;t.$http.get(this.BASE_INFO.BASE_URL+"api/load/getAllMinMaxTable",{}).then(function(a){if(a&&a.data&&a.data.data){var e=a.data.data;t.initAllMinMaxData(e)}})},initAllMinMaxData:function(t){if(t){this.totalTableData=t;var a=[],e=[],r=[],l=!0,n=!1,o=void 0;try{for(var d,s=i()(t);!(l=(d=s.next()).done);l=!0){var c=d.value;a.push(c.currload),e.push(c.maxload),r.push(c.minload)}}catch(t){n=!0,o=t}finally{try{!l&&s.return&&s.return()}finally{if(n)throw o}}this.initchart_avgload(a,e,r)}},initchart_avgload:function(t,a,e){var r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},color:["#0A6EDA","#FF9900","#DCDFE6"],legend:{itemWidth:20,itemHeight:4,icon:"bar",y:"bottom",data:["最小","实际","最大"]},grid:{left:"3%",right:"4%",bottom:"5%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:["电","热","冷","燃气"]},series:[{name:"最小",type:"bar",stack:"负荷",barWidth:30,data:e},{name:"实际",type:"bar",stack:"负荷",data:t},{name:"最大",type:"bar",stack:"负荷",data:a}]};n.a.init(document.getElementById("chart_avgload")).setOption(r)}}},d={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",{staticClass:"div-table",staticStyle:{height:"100%",width:"calc(50% - 10px)",float:"left","margin-top":"50px"}},[a("p",{staticClass:"table-title-p"}),this._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:this.totalTableData,border:"","header-cell-style":this.totalheadercellstyle}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),this._v(" "),a("el-table-column",{attrs:{prop:"currload",label:"实际"}}),this._v(" "),a("el-table-column",{attrs:{prop:"maxload",label:"最大"}}),this._v(" "),a("el-table-column",{attrs:{prop:"minload",label:"最小"}})],1)],1),this._v(" "),a("div",{staticStyle:{height:"500px",width:"calc(50% - 10px)","margin-left":"20px",float:"left"},attrs:{id:"chart_avgload"}})])},staticRenderFns:[]};var s=e("VU/8")(o,d,!1,function(t){e("uQmQ")},"data-v-a4910faa",null).exports,c={data:function(){return{tableData:[],spanArr:[],powerChartData:[],hotChartData:[],coldChartData:[],CCHPChartData:[]}},created:function(){this.getEnergyChangeData()},mounted:function(){},updated:function(){this.initpowerChartPie(this.powerChartData),this.inithotChartPie(this.hotChartData),this.initcoldChartPie(this.coldChartData),this.initCCHPChartPie(this.CCHPChartData)},methods:{arraySpanMethod:function(t){t.row,t.column;var a=t.rowIndex;if(0===t.columnIndex){var e=this.spanArr[a];return{rowspan:e,colspan:e>0?1:0}}},cellstyle:function(t){t.row,t.column,t.rowIndex;var a=t.columnIndex;return 0===a?"background: #9BC2E6;":1===a?"background: #DDEBF7;":void 0},headerrowstyle:function(t){t.row;if(0===t.rowIndex)return"background: #A9D08E;"},headercellstyle:function(t){t.row,t.column;var a=t.rowIndex,e=t.columnIndex;return 0===a&&0!=e&&1!=e?"background: #A9D08E;":1===a?"background: #E2EFDA;":void 0},totalheadercellstyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"background:#E4E7EB;font-weight: bold;color: #101010;"},getEnergyChangeData:function(){var t=this;t.$http.get(this.BASE_INFO.BASE_URL+"api/load/getEnergyChange",{}).then(function(a){if(a&&a.data&&a.data.data){var e=a.data.data;t.tableData=e,t.getSpanArr(t.tableData)}})},getSpanArr:function(t){console.log(t);for(var a=0;a<t.length;a++)0===a?(this.spanArr.push(1),this.pos=0):t[a].title===t[a-1].title?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=a),"powerChartPie"==t[a].chartId?(this.powerChartData=[],this.powerChartData.push({value:t[a].electricvalue,name:"电"},{value:t[a].heatvalue,name:"热"},{value:t[a].coldvalue,name:"冷"})):"hotChartPie"==t[a].chartId?(this.hotChartData=[],this.hotChartData.push({value:t[a].electricvalue,name:"电"},{value:t[a].heatvalue,name:"热"},{value:t[a].coldvalue,name:"冷"})):"coldChartPie"==t[a].chartId?(this.coldChartData=[],this.coldChartData.push({value:t[a].electricvalue,name:"电"},{value:t[a].heatvalue,name:"热"},{value:t[a].coldvalue,name:"冷"})):"CCHPChartPie"==t[a].chartId&&(this.CCHPChartData=[],this.CCHPChartData.push({value:t[a].electricvalue,name:"电"},{value:t[a].heatvalue,name:"热"},{value:t[a].coldvalue,name:"冷"}));console.log(this.powerChartData)},initpowerChartPie:function(t){var a={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"",type:"pie",radius:"55%",center:["50%","50%"],data:t,label:{normal:{formatter:"{b|{b}}{per|{d}%}",backgroundColor:"#eee",borderColor:"#aaa",borderWidth:1,borderRadius:4,rich:{a:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:.5,height:0},b:{padding:[5,5],fontSize:12,lineHeight:12},per:{color:"#eee",backgroundColor:"#334455",padding:[2,4],borderRadius:2,align:"center"}}}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.a.init(document.getElementById("powerChartPie")).setOption(a)},inithotChartPie:function(t){var a={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"",type:"pie",radius:"55%",center:["50%","50%"],data:t,label:{normal:{formatter:"{b|{b}}{per|{d}%}",backgroundColor:"#eee",borderColor:"#aaa",borderWidth:1,borderRadius:4,rich:{a:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:.5,height:0},b:{padding:[5,5],fontSize:12,lineHeight:12},per:{color:"#eee",backgroundColor:"#334455",padding:[2,4],borderRadius:2,align:"center"}}}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.a.init(document.getElementById("hotChartPie")).setOption(a)},initcoldChartPie:function(t){var a={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"",type:"pie",radius:"55%",center:["50%","50%"],data:t,label:{normal:{formatter:"{b|{b}}{per|{d}%}",backgroundColor:"#eee",borderColor:"#aaa",borderWidth:1,borderRadius:4,rich:{a:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:.5,height:0},b:{padding:[5,5],fontSize:12,lineHeight:12},per:{color:"#eee",backgroundColor:"#334455",padding:[2,4],borderRadius:2,align:"center"}}}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.a.init(document.getElementById("coldChartPie")).setOption(a)},initCCHPChartPie:function(t){var a={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"",type:"pie",radius:"55%",center:["50%","50%"],data:t,label:{normal:{formatter:"{b|{b}}{per|{d}%}",backgroundColor:"#eee",borderColor:"#aaa",borderWidth:1,borderRadius:4,rich:{a:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:.5,height:0},b:{padding:[5,5],fontSize:12,lineHeight:12},per:{color:"#eee",backgroundColor:"#334455",padding:[2,4],borderRadius:2,align:"center"}}}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.a.init(document.getElementById("CCHPChartPie")).setOption(a)}}},h={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("p",{staticClass:"table-title-p"},[t._v("能源供需、转换分析表")]),e("span",{staticStyle:{float:"left","margin-top":"4px","margin-left":"5px",color:"#a6a6a6"}},[t._v("2018-6-10 08:05")]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"span-method":t.arraySpanMethod,"cell-style":t.cellstyle,"header-cell-style":t.headercellstyle}},[e("el-table-column",{attrs:{prop:"title",label:"",width:"30"}}),t._v(" "),e("el-table-column",{attrs:{prop:"t2",label:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[e("p",{staticClass:"item-title"},[t._v(t._s(a.row.name))]),t._v(" "),e("p",[t._v(t._s(a.row.text))]),t._v(" "),e("p",{staticClass:"item-value"},[t._v(t._s(a.row.value))])])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"用能"}},[e("el-table-column",{attrs:{prop:"electric",label:"电"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.electric,function(a){return e("div",[e("span",{staticClass:"item-text"},[t._v(t._s(a.text))]),t._v(" "),e("span",{staticClass:"item-value"},[t._v(t._s(a.value))])])})}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"heat",label:"热"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.heat,function(a){return e("div",[e("span",{staticClass:"item-text"},[t._v(t._s(a.text))]),t._v(" "),e("span",{staticClass:"item-value"},[t._v(t._s(a.value))])])})}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"cold",label:"冷"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.cold,function(a){return e("div",[e("span",{staticClass:"item-text"},[t._v(t._s(a.text))]),t._v(" "),e("span",{staticClass:"item-value"},[t._v(t._s(a.value))])])})}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"terminal",label:"终端消费"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("div",{attrs:{id:t.row.chartId}})]}}])})],1)],1)],1)},staticRenderFns:[]};var u=e("VU/8")(c,h,!1,function(t){e("9LXM")},"data-v-012c196a",null).exports,v={data:function(){return{viewdiv:"first",activeName:"first",yeardate:new Date,pos:0,isA:!0,chartwidth:200,treeData:[{label:"斗门区 (12)",children:[{label:"珠海新青科技工业园太阳能光伏发电项目(伟创力厂区)"},{label:"珠海新青科技工业园太阳能光伏发电项目(伟创力厂区)"},{label:"珠海新青科技工业园太阳能光伏发电项目(伟创力厂区)"}]},{label:"金湾区 (6)",children:[{label:"二级 2-1",children:[{label:"三级 2-1-1"}]},{label:"二级 2-2",children:[{label:"三级 2-2-1"}]}]},{label:"横琴新区 (6)",children:[{label:"二级 3-1",children:[{label:"三级 3-1-1"}]},{label:"二级 3-2",children:[{label:"三级 3-2-1"}]}]}]}},mounted:function(){this.getchart_dayloadData(),this.autoHeight()},methods:{changeDate:function(){console.log(this.viewdiv),"first"==this.viewdiv?this.$refs.vTable.getEnergyChangeData():"second"==this.viewdiv&&this.$refs.vTransanalysis.getAllMinMaxData(),this.getchart_dayloadData()},autoHeight:function(){var t=document.body.clientWidth;this.chartwidth=.2*t-10},handleClick:function(t,a){if(this.activeName=t.name,this.viewdiv=t.name,"second"==t.name){var e=document.body.clientWidth;this.chartwidth=.2*e-10}},renderHeader:function(t,a){var e=a.column;a.$index,e.label.split(" ");return t("div",[t("span",["2222"]),t("p",["11111"])])},getchart_dayloadData:function(){var t=this;t.$http.get(this.BASE_INFO.BASE_URL+"api/load/getLoadByDay",{}).then(function(a){if(a&&a.data&&a.data.data){var e=a.data.data;t.initchart_dayloadData(e)}})},initchart_dayloadData:function(t){if(t){var a=[],e=[],r=[],l=0,n=!0,o=!1,d=void 0;try{for(var s,c=i()(t);!(n=(s=c.next()).done);n=!0){var h=s.value;(D={}).id=h.id,D.name=h.name,D.data=[],r.push(h.name);var u=!0,v=!1,p=void 0;try{for(var b,m=i()(h.data);!(u=(b=m.next()).done);u=!0){var f=b.value;D.data.push(f.value),0==l&&a.push(f.time)}}catch(t){v=!0,p=t}finally{try{!u&&m.return&&m.return()}finally{if(v)throw p}}e.push(D),l++}}catch(t){o=!0,d=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw d}}var g=[],y=!0,C=!1,_=void 0;try{for(var w,x=i()(e);!(y=(w=x.next()).done);y=!0){var D=w.value;g.push({name:D.name,type:"line",stack:"负荷",showSymbol:!1,data:D.data})}}catch(t){C=!0,_=t}finally{try{!y&&x.return&&x.return()}finally{if(C)throw _}}this.initchart_load(a,r,g)}},initchart_load:function(t,a,e){var r={title:{text:"日多能负荷曲线"},tooltip:{trigger:"axis"},color:["#0A6EDA","#FF081C","#0C9CA0"],legend:{itemWidth:20,itemHeight:3,icon:"bar",data:a},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t},yAxis:[{type:"value",name:"kW",axisLabel:{formatter:"{value}"}},{type:"value",name:"kWh",axisLabel:{formatter:"{value}"}}],series:e};n.a.init(document.getElementById("chart_load")).setOption(r)},initchart_avgload:function(){n.a.init(document.getElementById("chart_avgload")).setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},color:["#0A6EDA","#FF9900","#DCDFE6"],legend:{itemWidth:20,itemHeight:4,icon:"bar",y:"bottom",data:["最小","实际","最大"]},grid:{left:"3%",right:"4%",bottom:"5%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:["电","热","冷","燃气"]},series:[{name:"最小",type:"bar",stack:"负荷",barWidth:30,data:[18203,23489,29034,104970]},{name:"实际",type:"bar",stack:"负荷",data:[19325,23438,31e3,121594]},{name:"最大",type:"bar",stack:"负荷",data:[121594,134141,31e3,121594]}]})}},components:{vTransanalysis:s,TreeOrg:e("9qQU").a,vTable:u}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"负荷状态",name:"first"}}),t._v(" "),e("el-tab-pane",{attrs:{label:"转换分析",name:"second"}})],1),t._v(" "),e("div",[e("TreeOrg",{staticStyle:{float:"left"},attrs:{treeData:t.treeData}}),t._v(" "),e("div",{staticStyle:{float:"left",width:"calc(100% - 260px)","margin-left":"20px"}},[e("div",{staticClass:"div-top"},[e("span",{staticStyle:{"margin-left":"30px"}},[t._v("时间段选择")]),t._v(" "),e("el-date-picker",{staticStyle:{"margin-left":"5px"},attrs:{type:"date",placeholder:"选择日期"},on:{change:t.changeDate},model:{value:t.yeardate,callback:function(a){t.yeardate=a},expression:"yeardate"}})],1),t._v(" "),t._m(0),t._v(" "),"first"==t.viewdiv?e("div",{staticClass:"div-third"},[e("vTable",{ref:"vTable"})],1):t._e(),t._v(" "),e("div",{staticClass:"div-third-1"},["second"==t.viewdiv?e("v-Transanalysis",{ref:"vTransanalysis"}):t._e()],1)])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"div-second"},[a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"chart_load"}})])}]};var b=e("VU/8")(v,p,!1,function(t){e("uJA7")},"data-v-e79dc40a",null);a.default=b.exports},uJA7:function(t,a){},uQmQ:function(t,a){}});
//# sourceMappingURL=15.767dce6d601811758d55.js.map